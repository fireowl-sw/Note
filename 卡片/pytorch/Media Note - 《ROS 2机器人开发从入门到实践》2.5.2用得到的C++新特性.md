---
media: https://www.bilibili.com/video/BV1CRWWeoEso/
---

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 00:25](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT25.409S.webp) [00:25](https://www.bilibili.com/video/BV1CRWWeoEso/?t=25.408889#t=25.41) C++新特性

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 01:28](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT1M28.604S.webp) [01:28](https://www.bilibili.com/video/BV1CRWWeoEso/?t=88.604313#t=01:28.60) 两个重要的新特性

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 02:41](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT2M41.278S.webp) [02:41](https://www.bilibili.com/video/BV1CRWWeoEso/?t=161.277734#t=02:41.28) 导库

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 03:12](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT3M12.034S.webp) [03:12](https://www.bilibili.com/video/BV1CRWWeoEso/?t=192.03448#t=03:12.03) auto进行自动类型推导

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 05:04](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT5M4.711S.webp) [05:04](https://www.bilibili.com/video/BV1CRWWeoEso/?t=304.711263#t=05:04.71) 添加cmakelist

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 06:25](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT6M25.002S.webp) [06:25](https://www.bilibili.com/video/BV1CRWWeoEso/?t=385.002459#t=06:25.00) 智能指针
管理动态内存
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 07:52](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT7M52.677S.webp) [07:52](https://www.bilibili.com/video/BV1CRWWeoEso/?t=472.677085#t=07:52.68) 智能指针的作用
会记录这块内存被使用的数量
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 08:29](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT8M29.827S.webp) [08:29](https://www.bilibili.com/video/BV1CRWWeoEso/?t=509.82654#t=08:29.83) 演示 std::make_shared<>();
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 11:16](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT11M16.461S.webp) [11:16](https://www.bilibili.com/video/BV1CRWWeoEso/?t=676.461073#t=11:16.46) 自动推导到了类型
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 11:57](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT11M57.995S.webp) [11:57](https://www.bilibili.com/video/BV1CRWWeoEso/?t=717.994996#t=11:57.99) 共享指针的作用
当每一次创建它都会添加引用次数 p1.use_count()。它指向的内存地址 p1.get()

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 13:30](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT13M30.362S.webp) [13:30](https://www.bilibili.com/video/BV1CRWWeoEso/?t=810.362285#t=13:30.36) 预测是1

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 14:24](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT14M24.013S.webp) [14:24](https://www.bilibili.com/video/BV1CRWWeoEso/?t=864.012789#t=14:24.01) p1,p2的引用计数

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 15:03](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT15M3.652S.webp) [15:03](https://www.bilibili.com/video/BV1CRWWeoEso/?t=903.652433#t=15:03.65) p1.reset()释放指针，不指向原本的内存地址

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 16:13](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT16M13.796S.webp) [16:13](https://www.bilibili.com/video/BV1CRWWeoEso/?t=973.795818#t=16:13.80) 验证p2是否是指向该内存地址

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 18:16](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT18M16.691S.webp) [18:16](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1096.690599#t=18:16.69) 运行结果

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 20:03](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT20M3.988S.webp) [20:03](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1203.988226#t=20:03.99) lambda表达式
匿名函数
捕获列表 参数列表->返回值类型{函数体}

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 21:10](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT21M10.258S.webp) [21:10](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1270.257625#t=21:10.26) 导库
iostream algorithm

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 23:54](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT23M54.214S.webp) [23:54](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1434.214329#t=23:54.21) 整体使用
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 25:37](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT25M37.108S.webp) [25:37](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1537.108124#t=25:37.11) lambda好处

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 25:50](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT25M50.611S.webp) [25:50](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1550.611241#t=25:50.61) 函数包装器
自由函数，成员函数，lambda函数
函数包装器就是统一他们的调用方式

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 27:55](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT27M55.052S.webp) [27:55](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1675.051966#t=27:55.05) 导库
iostream functional

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 29:17](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT29M17.141S.webp) [29:17](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1757.141449#t=29:17.14) 写类的成员函数


![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 30:32](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT30M32.536S.webp) [30:32](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1832.536205#t=30:32.54) lambda函数

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 31:54](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT31M54.196S.webp) [31:54](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1914.195684#t=31:54.20) 正常调用

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 32:43](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT32M43.406S.webp) [32:43](https://www.bilibili.com/video/BV1CRWWeoEso/?t=1963.405622#t=32:43.41) 统一一种调用方式

![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 34:58](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT34M58.39S.webp) [34:58](https://www.bilibili.com/video/BV1CRWWeoEso/?t=2098.390267#t=34:58.39) std::bind(&方法，&类，一个参数用一个占位符std::placeholders::\_1)来包装成员函数
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 36:58](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT36M58.343S.webp) [36:58](https://www.bilibili.com/video/BV1CRWWeoEso/?t=2218.343241#t=36:58.34) 封装后调用

ros2里面要用好多方法，不给别人使用类的机会，安全
![《ROS 2机器人开发从入门到实践》2.5.2用得到的C++新特性 - 38:59](《ROS%202机器人开发从入门到实践》2.5.2用得到的C++新特性PT38M59.09S.webp) [38:59](https://www.bilibili.com/video/BV1CRWWeoEso/?t=2339.090244#t=38:59.09) 结果